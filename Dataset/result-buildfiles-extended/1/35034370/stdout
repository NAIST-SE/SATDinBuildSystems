{
  "Repository" : "35034370",
  "Revision" : "HEAD",
  "ObjectId" : "4eea2865021b799e3d5489025e101fdd9ea019dd",
  "CommitTime" : "2019-04-17T21:14:33Z",
  "Files" : {
    "Makefile" : {
      "ObjectId" : "e66982ace11c26265dd0ebbd32e59453811c1ed8",
      "LastModified" : "2019-04-02T21:01:57Z",
      "FileType" : "MAKEFILE",
      "0" : {
        "Text" : "#!/bin/bash\n\n# Makefile to wrap common docker and dev related tasks. Just type 'make' to get\n\n# help.\n\n#\n\n# Requirements:\n\n#  - Install Docker locally\n\n#\t \tMac OS `brew cask install docker`\n\n#    \tLinux: `apt-get install docker`\n",
        "Line" : 1,
        "CharPositionInLine" : 0
      },
      "1" : {
        "Text" : "# HELP\n\n# This will output the help for each task\n\n# thanks to https://marmelab.com/blog/2016/02/29/auto-documented-makefile.html\n",
        "Line" : 17,
        "CharPositionInLine" : 0
      },
      "2" : {
        "Text" : "## This help.\n",
        "Line" : 22,
        "CharPositionInLine" : 6
      },
      "3" : {
        "Text" : "## / {printf \"\\033[36m%-30s\\033[0m %s\\n\", $$1, $$2}' $(MAKEFILE_LIST)\n",
        "Line" : 23,
        "CharPositionInLine" : 47
      },
      "4" : {
        "Text" : "## Show me the git hash\n",
        "Line" : 27,
        "CharPositionInLine" : 10
      },
      "5" : {
        "Text" : "## Build the Pharos container from current repo. Make sure to commit all changes beforehand\n",
        "Line" : 30,
        "CharPositionInLine" : 7
      },
      "6" : {
        "Text" : "## Build the Pharos container, no cached layers.\n",
        "Line" : 33,
        "CharPositionInLine" : 10
      },
      "7" : {
        "Text" : "## Start containers for Pharos, Postgresql, Nginx\n",
        "Line" : 36,
        "CharPositionInLine" : 4
      },
      "8" : {
        "Text" : "## Stop containers for Pharos, Postgresql, Nginx\n",
        "Line" : 39,
        "CharPositionInLine" : 6
      },
      "9" : {
        "Text" : "## Just run Pharos in foreground\n",
        "Line" : 42,
        "CharPositionInLine" : 5
      },
      "10" : {
        "Text" : "## Start Pharos container, run command and exit.\n",
        "Line" : 45,
        "CharPositionInLine" : 8
      },
      "11" : {
        "Text" : "## Run Pharos spec tests in CI\n",
        "Line" : 51,
        "CharPositionInLine" : 9
      },
      "12" : {
        "Text" : "## Run Pharos spec tests\n",
        "Line" : 59,
        "CharPositionInLine" : 6
      },
      "13" : {
        "Text" : "#   Test for only latest build\n\n#\tdocker run --rm -it --network pharos-test-net -e PHAROS_DB_NAME=pharos_test -e PHAROS_DB_HOST=pharos-test-db -e RAILS_ENV=test $(TAG) /bin/bash -c \"bin/rake\"\n\n#\tTest current codebase\n",
        "Line" : 63,
        "CharPositionInLine" : 0
      },
      "14" : {
        "Text" : "## Run Pharos for development on localhost\n",
        "Line" : 70,
        "CharPositionInLine" : 5
      },
      "15" : {
        "Text" : "#docker start pharos-dev-db > /dev/null 2>&1 || docker run -d --network pharos-dev-net --hostname pharos-dev-db -e POSTGRES_DB=pharos_development --name pharos-dev-db -p 5432:5432 postgres:9.6.6-alpine\n",
        "Line" : 72,
        "CharPositionInLine" : 1
      },
      "16" : {
        "Text" : "## Stop and remove running Docker containers\n",
        "Line" : 77,
        "CharPositionInLine" : 10
      },
      "17" : {
        "Text" : "## Stop running Docker containers. Can pick up dev later\n",
        "Line" : 82,
        "CharPositionInLine" : 9
      },
      "18" : {
        "Text" : "# GITLAB\n",
        "Line" : 87,
        "CharPositionInLine" : 1
      },
      "19" : {
        "Text" : "# Docker Hub\n\n#docker login docker.io\n\n#docker push aptrust/pharos\n",
        "Line" : 91,
        "CharPositionInLine" : 1
      },
      "20" : {
        "Text" : "# Docker Hub\n\n#docker login docker.io\n\n#docker push aptrust/pharos\n",
        "Line" : 99,
        "CharPositionInLine" : 1
      },
      "21" : {
        "Text" : "# Docker release - build, tag and push the container\n",
        "Line" : 103,
        "CharPositionInLine" : 0
      },
      "22" : {
        "Text" : "## Make a release by building and publishing the `{version}` as `latest` tagged containers to Gitlab\n",
        "Line" : 104,
        "CharPositionInLine" : 23
      },
      "23" : {
        "Text" : "## Push the Docker image up to the registry\n",
        "Line" : 106,
        "CharPositionInLine" : 6
      },
      "24" : {
        "Text" : "## Clean the generated/compiles files\n",
        "Line" : 109,
        "CharPositionInLine" : 7
      },
      "CommentCount" : 25
    }
  },
  "FileTypes" : {
    "MAKEFILE" : 1
  },
  "ElapsedTime" : 747
}