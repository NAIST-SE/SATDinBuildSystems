{
  "Repository" : "4642360",
  "Revision" : "HEAD",
  "ObjectId" : "4a943f1c79770d6a511889bec00baa194a5a9d55",
  "CommitTime" : "2017-06-02T17:32:56Z",
  "Files" : {
    "Makefile" : {
      "ObjectId" : "8a8f03186e4d84be9f2db0a29c4e3e6c76e6fa72",
      "LastModified" : "2016-03-14T23:34:24Z",
      "FileType" : "MAKEFILE",
      "0" : {
        "Text" : "# for building packages\n",
        "Line" : 6,
        "CharPositionInLine" : 0
      },
      "1" : {
        "Text" : "# remove dlstubs.o for CYGWIN\n",
        "Line" : 11,
        "CharPositionInLine" : 0
      },
      "2" : {
        "Text" : "#print_vars:\n\n#\t$(HOST)\n",
        "Line" : 78,
        "CharPositionInLine" : 0
      },
      "3" : {
        "Text" : "# let's remove static now by default to be safe because we don't always\n\n# detect red hat installs like on aws. do 'make static' to make as static.\n\n#STATIC := -static\n",
        "Line" : 89,
        "CharPositionInLine" : 0
      },
      "4" : {
        "Text" : "# MDW: i get some parsing inconsistencies when running the first qa injection\n\n# test if this is -O3. strange.\n\n# now debian jesse doesn't like -O3, it will core right away when spidering\n\n# so change this to -O2 from -O3 as well.\n",
        "Line" : 93,
        "CharPositionInLine" : 0
      },
      "5" : {
        "Text" : "# my machine, titan, runs the old 2.4 kernel, it does not use pthreads because\n\n# they were very buggy in 1999. Plus they are still kind of slow even today,\n\n# in 2013. So it just uses clone() and does its own \"threading\". Unfortunately,\n\n# the way it works is not even possible on newer kernels because they no longer\n\n# allow you to override the _errno_location() function. -- matt\n\n# -DMATTWELLS\n\n# turn off stack smash detection because it won't save and dump core when\n\n# stack gets smashed like it normally would when it gets a seg fault signal.\n",
        "Line" : 102,
        "CharPositionInLine" : 0
      },
      "6" : {
        "Text" : "# are we a 32-bit architecture? use different libraries then\n",
        "Line" : 113,
        "CharPositionInLine" : 0
      },
      "7" : {
        "Text" : "#LIBS= -L. ./libz.a ./libssl.a ./libcrypto.a ./libiconv.a ./libm.a ./libstdc++.a -lpthread\n",
        "Line" : 116,
        "CharPositionInLine" : 0
      },
      "8" : {
        "Text" : "#LIBS= -L. ./libz.a ./libssl.a ./libcrypto.a ./libiconv.a ./libm.a ./libstdc++.a -lpthread\n",
        "Line" : 121,
        "CharPositionInLine" : 0
      },
      "9" : {
        "Text" : "#\n\n# Use -Wpadded flag to indicate padded structures.\n\n#\n",
        "Line" : 125,
        "CharPositionInLine" : 0
      },
      "10" : {
        "Text" : "#LIBS= -L. ./libz.a ./libssl.a ./libcrypto.a ./libiconv.a ./libm.a ./libstdc++.a -lpthread\n\n# apt-get install libssl-dev (to provide libssl and libcrypto)\n\n# to build static libiconv.a do a './configure --enable$(STATIC)' then 'make'\n\n# in the iconv directory\n",
        "Line" : 129,
        "CharPositionInLine" : 0
      },
      "11" : {
        "Text" : "# if you have seo.cpp link that in. This is not part of the open source\n\n# distribution but is available for interested parties.\n",
        "Line" : 137,
        "CharPositionInLine" : 0
      },
      "12" : {
        "Text" : "# let's keep the libraries in the repo for easier bug reporting and debugging\n\n# in general if we can. the includes are still in /usr/include/ however...\n\n# which is kinda strange but seems to work so far.\n\n#LIBS= -L. ./libz.a ./libssl.a ./libcrypto.a ./libiconv.a ./libm.a ./libgcc.a ./libpthread.a ./libc.a ./libstdc++.a \n",
        "Line" : 145,
        "CharPositionInLine" : 0
      },
      "13" : {
        "Text" : "#SRCS := $(OBJS:.o=.cpp) main.cpp\n",
        "Line" : 152,
        "CharPositionInLine" : 0
      },
      "14" : {
        "Text" : "#g8: gb\n\n#\tscp gb g8:/p/gb.new\n\n#\tssh g8 'cd /p/ ; ./gb stop ; ./gb installgb ; sleep 4 ; ./gb start'\n",
        "Line" : 157,
        "CharPositionInLine" : 0
      },
      "15" : {
        "Text" : "# version:\n\n# \techo -n \"#define GBVERSION \\\"\" > vvv\n\n# \t#date --utc >> vvv\n\n# \tdate +%Y.%M.%d-%T-%Z >> vvv\n\n# \thead -c -1 vvv > Version.h\n\n# \techo \"\\\"\" >> Version.h\n\n# \t#for Version.h dependency\n\n# \t#rm main.o\n\n# \t#rm PingServer.o\n",
        "Line" : 163,
        "CharPositionInLine" : 0
      },
      "16" : {
        "Text" : "# use this for compiling on CYGWIN: \n\n# only for 32bit cygwin right now and\n\n# you have to install the packages that have these libs.\n\n# you have to get these packages from cygwin:\n\n# 1. LIBS  > zlib-devel: Gzip de/compression library (development)\n\n# 2. LIBS  > libiconv: GNU character set conversion library and utlities\n",
        "Line" : 202,
        "CharPositionInLine" : 0
      },
      "17" : {
        "Text" : "# 3. DEVEL > openssl: cygwin32-openssl: OpenSSL for Cygwin 32bit toolchain\n",
        "Line" : 209,
        "CharPositionInLine" : 0
      },
      "18" : {
        "Text" : "# 3. NET   > openssl: A general purpose cryptographt toolkit with TLS impl...\n",
        "Line" : 211,
        "CharPositionInLine" : 0
      },
      "19" : {
        "Text" : "# 4. DEVEL > mingw-pthreads: Libpthread for MinGW.org Wind32 toolchain\n\n# 5. DEVEL > gcc-g++: GNU Compiler Collection (C++)\n\n# 6. DEVEL > make: The GNU version of the 'make' utility\n\n# 7. DEVEL > git: Distributed version control system\n\n# 8. EDITORS > emacs\n",
        "Line" : 213,
        "CharPositionInLine" : 0
      },
      "20" : {
        "Text" : "#iana_charset.cpp: parse_iana_charsets.pl character-sets supported_charsets.txt\n\n#\t./parse_iana_charsets.pl < character-sets\n",
        "Line" : 226,
        "CharPositionInLine" : 0
      },
      "21" : {
        "Text" : "#iana_charset.h: parse_iana_charsets.pl character-sets supported_charsets.txt\n\n#\t./parse_iana_charsets.pl < character-sets\n",
        "Line" : 229,
        "CharPositionInLine" : 0
      },
      "22" : {
        "Text" : "# comment this out for faster deb package building\n",
        "Line" : 334,
        "CharPositionInLine" : 0
      },
      "23" : {
        "Text" : "#.PHONY: GBVersion.cpp\n",
        "Line" : 338,
        "CharPositionInLine" : 0
      },
      "24" : {
        "Text" : "# Url::set() seems to take too much time\n",
        "Line" : 380,
        "CharPositionInLine" : 0
      },
      "25" : {
        "Text" : "# Sitedb has that slow matching code\n",
        "Line" : 384,
        "CharPositionInLine" : 0
      },
      "26" : {
        "Text" : "# when making a new file, add the recs to the map fast\n",
        "Line" : 391,
        "CharPositionInLine" : 0
      },
      "27" : {
        "Text" : "# this was getting corruption, was it cuz we used -O2 compiler option?\n\n# RdbTree.o:\n\n# \t$(CC) $(DEFS) $(CPPFLAGS) -O3 -c $*.cpp \n",
        "Line" : 395,
        "CharPositionInLine" : 0
      },
      "28" : {
        "Text" : "# final gigabit generation in here:\n",
        "Line" : 408,
        "CharPositionInLine" : 0
      },
      "29" : {
        "Text" : "# take this out. seems to not trigger merges when percent of\n\n# negative titlerecs is over 40.\n",
        "Line" : 427,
        "CharPositionInLine" : 0
      },
      "30" : {
        "Text" : "# RdbCache.cpp gets \"corrupted\" with -O2... like RdbTree.cpp\n\n#RdbCache.o:\n\n#\t$(CC) $(DEFS) $(CPPFLAGS) -O2 -c $*.cpp \n",
        "Line" : 432,
        "CharPositionInLine" : 0
      },
      "31" : {
        "Text" : "# fast dictionary generation and spelling recommendations\n\n#Speller.o:\n\n#\t$(CC) $(DEFS) $(CPPFLAGS) -O2 -c $*.cpp \n",
        "Line" : 436,
        "CharPositionInLine" : 0
      },
      "32" : {
        "Text" : "# O2 seems slightly faster than O2 on this for some reason\n\n# O2 is almost twice as fast as no O\n",
        "Line" : 440,
        "CharPositionInLine" : 0
      },
      "33" : {
        "Text" : "# Query::setBitScores() needs this optimization\n\n#Query.o:\n\n#\t$(CC) $(DEFS) $(CPPFLAGS) -O2 -c $*.cpp \n",
        "Line" : 451,
        "CharPositionInLine" : 0
      },
      "34" : {
        "Text" : "# Msg3's should calculate the page ranges fast\n\n#Msg3.o:\n\n#\t$(CC) $(DEFS) $(CPPFLAGS) -O2 -c $*.cpp \n",
        "Line" : 455,
        "CharPositionInLine" : 0
      },
      "35" : {
        "Text" : "# fast parsing\n",
        "Line" : 459,
        "CharPositionInLine" : 0
      },
      "36" : {
        "Text" : "# why was this commented out?\n",
        "Line" : 492,
        "CharPositionInLine" : 0
      },
      "37" : {
        "Text" : "# fast relate topics generation\n",
        "Line" : 498,
        "CharPositionInLine" : 0
      },
      "38" : {
        "Text" : "# getUrlFilterNum2()\n",
        "Line" : 535,
        "CharPositionInLine" : 0
      },
      "39" : {
        "Text" : "#DateParse2.o:\n\n#\t$(CC) $(DEFS) $(CPPFLAGS)  -O2 -c $*.cpp \n",
        "Line" : 545,
        "CharPositionInLine" : 0
      },
      "40" : {
        "Text" : "# SiteBonus.o:\n\n# \t$(CC) $(DEFS) $(CPPFLAGS)  -O3 -c $*.cpp \n",
        "Line" : 566,
        "CharPositionInLine" : 0
      },
      "41" : {
        "Text" : "# Stupid gcc-2.95 stabs debug can't handle such a big file.\n\n# add -m32 flag to this line if you need to make a 32-bit gb.\n\n#geo_ip_table.o: geo_ip_table.cpp geo_ip_table.h\n\n#\t$(CC) $(DEFS) -Wall -pipe -c $*.cpp \n",
        "Line" : 571,
        "CharPositionInLine" : 0
      },
      "42" : {
        "Text" : "# dpkg-buildpackage calls 'make binary' to create the files for the deb pkg\n\n# which must all be stored in ./debian/gb/\n",
        "Line" : 576,
        "CharPositionInLine" : 0
      },
      "43" : {
        "Text" : "# gigablast will copy over the necessary files. it has a list of the\n\n# necessary files and that list changes over time so it is better to let gb\n\n# deal with it.\n",
        "Line" : 580,
        "CharPositionInLine" : 0
      },
      "44" : {
        "Text" : "# if user types 'gb' it will use the binary in /var/gigablast/data0/gb\n",
        "Line" : 590,
        "CharPositionInLine" : 0
      },
      "45" : {
        "Text" : "# if machine restarts...\n\n# the new way that does not use run-levels anymore\n\n#\trm -f $(DESTDIR)/etc/init.d/gb\n\n#\tln -s /lib/init/upstart-job $(DESTDIR)/etc/init.d/gb\n\n# initctl upstart-job conf file (gb stop|start|reload)\n\n#\tcp init.gb.conf $(DESTDIR)/etc/init/gb.conf\n",
        "Line" : 593,
        "CharPositionInLine" : 0
      },
      "46" : {
        "Text" : "#.cpp: $(OBJS)\n\n#\t$(CC) $(DEFS) $(CPPFLAGS) -o $@ $@.o $(OBJS) $(LIBS)\n\n#\t$(CC) $(DEFS) $(CPPFLAGS) -o $@ $@.cpp $(OBJS) $(LIBS)\n",
        "Line" : 608,
        "CharPositionInLine" : 0
      },
      "47" : {
        "Text" : "##\n\n## Auto dependency generation\n\n## This is broken, if you edit Version.h and recompile it doesn't work. (mdw)\n\n#%.d: %.cpp\t\n\n#\t@echo \"generating dependency information for $<\"\n\n#\t@set -e; $(CC) -M $(DEFS) $(CPPFLAGS) $< \\\n#\t| sed 's/\\($*\\)\\.o[ :]*/\\1.o $@ : /g' > $@; \\\n#\t[ -s $@ ] || rm -f $@\n",
        "Line" : 612,
        "CharPositionInLine" : 0
      },
      "48" : {
        "Text" : "#-include $(SRCS:.cpp=.d)\n",
        "Line" : 620,
        "CharPositionInLine" : 0
      },
      "49" : {
        "Text" : "# REDHAT PACKAGE SECTION BEGIN\n",
        "Line" : 629,
        "CharPositionInLine" : 0
      },
      "50" : {
        "Text" : "# try building the .deb and then running 'alien --to-rpm gb_1.0-1_i686.deb'\n\n# to build the .rpm\n",
        "Line" : 631,
        "CharPositionInLine" : 0
      },
      "51" : {
        "Text" : "# move this tarball into ~/rpmbuild/?????\n\n# then run rpmbuild -ba gb-1.0.spec to build the rpms\n\n# rpm -ivh gb-1.0-...  to install the pkg\n\n# testing-rpm:\n\n# \tgit archive --format=tar --prefix=gb-1.0/ testing > gb-1.0.tar\n\n# \tmv gb-1.0.tar /home/mwells/rpmbuild/SOURCES/\n\n# \trpmbuild -bb gb-1.0.spec\n\n# \tscp /home/mwells/rpmbuild/RPMS/x86_64/gb-*rpm www.gigablast.com:/w/html/\n",
        "Line" : 634,
        "CharPositionInLine" : 0
      },
      "52" : {
        "Text" : "# master-rpm:\n\n# \tgit archive --format=tar --prefix=gb-1.0/ master > gb-1.0.tar\n\n# \tmv gb-1.0.tar /home/mwells/rpmbuild/SOURCES/\n\n# \trpmbuild -bb gb-1.0.spec\n\n# \tscp /home/mwells/rpmbuild/RPMS/x86_64/gb-*rpm www.gigablast.com:/w/html/\n",
        "Line" : 643,
        "CharPositionInLine" : 0
      },
      "53" : {
        "Text" : "# REDHAT PACKAGE SECTION END\n",
        "Line" : 649,
        "CharPositionInLine" : 0
      },
      "54" : {
        "Text" : "# DEBIAN PACKAGE SECTION BEGIN\n",
        "Line" : 651,
        "CharPositionInLine" : 0
      },
      "55" : {
        "Text" : "# need to do 'apt-get install dh-make'\n\n# deb-master\n",
        "Line" : 653,
        "CharPositionInLine" : 0
      },
      "56" : {
        "Text" : "# change \"-p gb_1.0\" to \"-p gb_1.1\" to update version for example\n",
        "Line" : 658,
        "CharPositionInLine" : 0
      },
      "57" : {
        "Text" : "# zero this out, it is just filed with the .txt files erroneously and it'll\n\n# try to automatiicaly install in /usr/docs/\n",
        "Line" : 660,
        "CharPositionInLine" : 0
      },
      "58" : {
        "Text" : "# make the debian/copyright file contain the license\n",
        "Line" : 664,
        "CharPositionInLine" : 0
      },
      "59" : {
        "Text" : "#\tcat LICENSE | awk -Fxvcty '{print \" \"$1}' >> debian/copyright\n",
        "Line" : 666,
        "CharPositionInLine" : 0
      },
      "60" : {
        "Text" : "# the control file describes the package\n",
        "Line" : 669,
        "CharPositionInLine" : 0
      },
      "61" : {
        "Text" : "# try to use our own rules so we can override dh_shlibdeps and others\n",
        "Line" : 671,
        "CharPositionInLine" : 0
      },
      "62" : {
        "Text" : "# make our own changelog file\n",
        "Line" : 673,
        "CharPositionInLine" : 0
      },
      "63" : {
        "Text" : "# fix dh_shlibdeps from bitching about dependencies on shared libs\n\n# YOU HAVE TO RUN THIS before you run 'make'\n\n#\texport LD_LIBRARY_PATH=./debian/gb/var/gigablast/data0\n\n# build the package now\n\n#\tdpkg-buildpackage -j6 -nc -ai386 -ti386 -b -uc -rfakeroot\n",
        "Line" : 682,
        "CharPositionInLine" : 0
      },
      "64" : {
        "Text" : "# move to current dur\n",
        "Line" : 689,
        "CharPositionInLine" : 0
      },
      "65" : {
        "Text" : "# upload deb\n",
        "Line" : 691,
        "CharPositionInLine" : 0
      },
      "66" : {
        "Text" : "# alien it\n",
        "Line" : 693,
        "CharPositionInLine" : 0
      },
      "67" : {
        "Text" : "# upload rpm\n",
        "Line" : 695,
        "CharPositionInLine" : 0
      },
      "68" : {
        "Text" : "# change \"-p gb_1.0\" to \"-p gb_1.1\" to update version for example\n",
        "Line" : 702,
        "CharPositionInLine" : 0
      },
      "69" : {
        "Text" : "# zero this out, it is just filed with the .txt files erroneously and it'll\n\n# try to automatiicaly install in /usr/docs/\n",
        "Line" : 704,
        "CharPositionInLine" : 0
      },
      "70" : {
        "Text" : "# make the debian/copyright file contain the license\n",
        "Line" : 708,
        "CharPositionInLine" : 0
      },
      "71" : {
        "Text" : "#\tcat LICENSE | awk -Fxvcty '{print \" \"$1}' >> debian/copyright\n",
        "Line" : 710,
        "CharPositionInLine" : 0
      },
      "72" : {
        "Text" : "# the control file describes the package\n",
        "Line" : 713,
        "CharPositionInLine" : 0
      },
      "73" : {
        "Text" : "# try to use our own rules so we can override dh_shlibdeps and others\n",
        "Line" : 715,
        "CharPositionInLine" : 0
      },
      "74" : {
        "Text" : "# make our own changelog file\n",
        "Line" : 717,
        "CharPositionInLine" : 0
      },
      "75" : {
        "Text" : "# fix dh_shlibdeps from bitching about dependencies on shared libs\n\n# YOU HAVE TO RUN THIS before you run 'make'\n\n#\texport LD_LIBRARY_PATH=./debian/gb/var/gigablast/data0\n\n# build the package now\n",
        "Line" : 726,
        "CharPositionInLine" : 0
      },
      "76" : {
        "Text" : "# move to current dur\n",
        "Line" : 731,
        "CharPositionInLine" : 0
      },
      "77" : {
        "Text" : "# upload deb\n",
        "Line" : 733,
        "CharPositionInLine" : 0
      },
      "78" : {
        "Text" : "# alien it\n",
        "Line" : 735,
        "CharPositionInLine" : 0
      },
      "79" : {
        "Text" : "# upload rpm\n",
        "Line" : 737,
        "CharPositionInLine" : 0
      },
      "80" : {
        "Text" : "#deb-testing\n\n#testing-deb:\n\n#\tgit archive --format=tar --prefix=gb-1.5/ testing > ../gb_1.5.orig.tar\n\n#\trm -rf debian\n\n# change \"-p gb_1.0\" to \"-p gb_1.1\" to update version for example\n\n#\tdh_make -e gigablast@mail.com -p gb_1.5 -f ../gb_1.5.orig.tar\n\n# zero this out, it is just filed with the .txt files erroneously and it'll\n\n# try to automatiicaly install in /usr/docs/\n\n#\trm debian/docs\n\n#\ttouch debian/docs\n\n# make the debian/copyright file contain the license\n\n#\tcp copyright.head  debian/copyright\n\n##\tcat LICENSE | awk -Fxvcty '{print \" \"$1}' >> debian/copyright\n\n#\tcat LICENSE >> debian/copyright\n\n#\tcat copyright.tail >> debian/copyright\n\n# the control file describes the package\n\n#\tcp control.deb debian/control\n\n# try to use our own rules so we can override dh_shlibdeps and others\n\n#\tcp gb.deb.rules debian/rules\n\n#\tcp changelog debian/changelog\n\n# make the pkg dependencies file ourselves since we overrode dh_shlibdeps\n\n# with our own debian/rules file. see that file for more info.\n\n##\techo  \"shlibs:Depends=libc6 (>= 2.3)\" > debian/gb.substvars \n\n##\techo  \"shlibs:Depends=netpbm (>= 0.0)\" > debian/gb.substvars \n\n##\techo  \"misc:Depends=netpbm (>= 0.0)\" > debian/gb.substvars \n\n# fix dh_shlibdeps from bitching about dependencies on shared libs\n\n# YOU HAVE TO RUN THIS before you run 'make'\n\n##\texport LD_LIBRARY_PATH=./debian/gb/var/gigablast/data0\n\n# build the package now. if we don't specify -ai386 -ti386 then some users\n\n# get a wrong architecture msg and 'dpkg -i' fails\n\n#\tdpkg-buildpackage -nc -ai686 -ti686 -b -uc -rfakeroot\n\n##\tdpkg-buildpackage -nc -b -uc -rfakeroot\n\n# move to current dur\n\n#\tmv ../gb_*.deb .\t\n",
        "Line" : 742,
        "CharPositionInLine" : 0
      },
      "81" : {
        "Text" : "# upload\n",
        "Line" : 779,
        "CharPositionInLine" : 0
      },
      "82" : {
        "Text" : "# DEBIAN PACKAGE SECTION END\n",
        "Line" : 783,
        "CharPositionInLine" : 0
      },
      "83" : {
        "Text" : "# You may need:\n\n# sudo apt-get install libffi-dev libssl-dev\n",
        "Line" : 786,
        "CharPositionInLine" : 0
      },
      "CommentCount" : 84
    }
  },
  "FileTypes" : {
    "MAKEFILE" : 1
  },
  "ElapsedTime" : 1057
}